var e=Object.defineProperty,t=(t,s,o)=>((t,s,o)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[s]=o)(t,"symbol"!=typeof s?s+"":s,o);import{r as s}from"./phaser-UvlxNa5i.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var o=s();class r extends o.Scene{constructor(){super("Boot")}preload(){this.load.image("background","assets/bg.png")}create(){this.scene.start("Preloader")}}class i extends o.Scene{constructor(){super("GameOver"),t(this,"camera"),t(this,"background"),t(this,"gameover_text")}create(e){this.camera=this.cameras.main,this.camera.setBackgroundColor(16711680),this.background=this.add.image(512,384,"background"),this.background.setAlpha(.5),this.gameover_text=this.add.text(512,320,"Game Over",{fontFamily:"Arial Black",fontSize:64,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}).setOrigin(.5),this.add.text(512,400,`Gems Collected: ${e.score}`,{fontFamily:"Arial",fontSize:32,color:"#ffff00",align:"center"}).setOrigin(.5),this.input.once("pointerdown",(()=>{this.scene.start("MainMenu")})),this.input.keyboard.on("keydown-ENTER",(()=>{this.scene.start("MainMenu")}))}}class a extends o.Scene{constructor(){super("Game"),t(this,"player"),t(this,"cursors"),t(this,"background"),t(this,"meteorGroup"),t(this,"gemGroup"),t(this,"lastMeteorY",-1),t(this,"score",0),t(this,"scoreText")}create(){var e;this.background=this.add.image(512,384,"background"),this.player=this.physics.add.sprite(200,300,"player"),this.player.setScale(.3),this.player.setCollideWorldBounds(!0),null==(e=this.player.body)||e.setSize(480,330),this.cursors=this.input.keyboard.createCursorKeys(),this.meteorGroup=this.physics.add.group(),this.gemGroup=this.physics.add.group(),this.time.addEvent({delay:1e3,loop:!0,callback:this.spawnMeteor,callbackScope:this}),this.time.addEvent({delay:3560,loop:!0,callback:this.spawnGem,callbackScope:this}),this.physics.add.overlap(this.player,this.meteorGroup,this.handleCollision,void 0,this),this.physics.add.overlap(this.player,this.gemGroup,((e,t)=>{this.collectGem(e,t)}),void 0,this),this.physics.add.collider(this.gemGroup,this.meteorGroup),this.scoreText=this.add.text(16,16,"Gems: 0",{fontSize:"20px",color:"#ffffff"}),this.score=0}update(){var e,t,s,o;this.player.setVelocity(0),(null==(e=this.cursors.left)?void 0:e.isDown)?this.player.setVelocityX(-300):(null==(t=this.cursors.right)?void 0:t.isDown)&&this.player.setVelocityX(300),(null==(s=this.cursors.up)?void 0:s.isDown)?this.player.setVelocityY(-300):(null==(o=this.cursors.down)?void 0:o.isDown)&&this.player.setVelocityY(300)}spawnMeteor(){var e,t;let s=Phaser.Math.Between(50,700);for(;Math.abs(s-this.lastMeteorY)<100;)s=Phaser.Math.Between(50,700);this.lastMeteorY=s;const o=this.meteorGroup.create(1050,s,"meteor");o.setScale(.2),o.setVelocityX(-200),o.setImmovable(!0),o.setCollideWorldBounds(!1),null==(e=o.body)||e.setSize(450,430),null==(t=o.body)||t.setOffset(250,250)}spawnGem(){var e;let t=Phaser.Math.Between(50,700),s=10;for(;s>0&&this.physics.overlapRect(1050,t,50,50,!0,!0).some((e=>this.meteorGroup.contains(e.gameObject)));)t=Phaser.Math.Between(50,700),s--;const o=this.gemGroup.create(1050,t,"gemstone");o.setScale(.1),o.setVelocityX(-200),o.setImmovable(!0),o.setCollideWorldBounds(!1),null==(e=o.body)||e.setSize(400,480)}collectGem(e,t){t.destroy(),this.score+=1,this.scoreText.setText("Gems: "+this.score)}handleCollision(){this.scene.start("GameOver",{score:this.score})}}class n extends o.Scene{constructor(){super("MainMenu"),t(this,"background"),t(this,"logo"),t(this,"title")}create(){this.background=this.add.image(512,384,"background"),this.logo=this.add.image(512,300,"logo"),this.logo.setScale(.5),this.title=this.add.text(512,500,"Start",{fontFamily:"Arial Black",fontSize:38,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}).setOrigin(.5),this.input.once("pointerdown",(()=>{this.scene.start("Game")})),this.input.keyboard.on("keydown-ENTER",(()=>{this.scene.start("Game")}))}}class l extends o.Scene{constructor(){super("Preloader")}init(){this.add.image(512,384,"background"),this.add.rectangle(512,384,468,32).setStrokeStyle(1,16777215);const e=this.add.rectangle(282,384,4,28,16777215);this.load.on("progress",(t=>{e.width=4+460*t}))}preload(){this.load.setPath("assets"),this.load.image("logo","logo.png"),this.load.image("player","player.png"),this.load.image("meteor","meteor.png"),this.load.image("gemstone","gemstone.png")}create(){this.scene.start("MainMenu")}}const c={type:o.AUTO,width:1024,height:768,parent:"game-container",backgroundColor:"#028af8",scene:[r,l,n,a,i],physics:{default:"arcade",arcade:{gravity:{y:0,x:0},debug:!1}}};document.addEventListener("DOMContentLoaded",(()=>{new o.Game({...c,parent:"game-container"})}));
